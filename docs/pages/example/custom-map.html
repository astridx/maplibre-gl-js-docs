<div id="map"></div>
<script>
    maplibregl.addProtocol('custom', (params, callback) => {
        fetch(`../../${params.url.split('://')[1]}`)
            .then((t) => {
                if (t.status == 200) {
                    t.arrayBuffer().then((arr) => {
                        callback(null, arr, null, null);
                    });
                } else {
                    callback(new Error(`Tile fetch error: ${t.statusText}`));
                }
            })
            .catch((e) => {
                callback(new Error(e));
            });
        return { cancel: () => {} };
    });

    var map = new maplibregl.Map({
        container: 'map', // container id
        style: '../../demotiles/custom_style.json', // style URL
        center: [0, 0], // starting position [lng, lat]
        zoom: 1 // starting zoom
    });
</script>
